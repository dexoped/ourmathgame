<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Quiz Screen</title>
</head>
<body style="background: linear-gradient(162deg,#8FF277 37%, #05F9DC 100%); height: 130vh;" >
    <div class="h-15 border-8 border-green-300 bg-green-300" style="height: 80px;">  <h1 class="text-4xl font-bold text-center pt-3"> Our Math Game</h1></div>
    <div class="container mx-auto p-4 flex-grow flex flex-col items-center">
        <div class="w-full max-w-4xl bg-opacity-50 bg-white p-8 rounded-lg shadow-lg">
            <div class="flex justify-center items-center mb-4">
                <div class="bg-blue-500 text-white p-2 rounded-full">
                    <span id="timer">00:00:00</span>
                </div>
            </div>
            <div id="questions" class="space-y-4 mx-10 ">
                <!-- Questions will be dynamically inserted here -->
            </div>
            <div class="flex justify-center mt-6">
                <button id="submit-button" class="bg-blue-600 text-white py-2 px-6 rounded-lg text-xl" onclick="submitAnswers()">Submit</button>
            </div>
        </div>
    </div>

    <script>
        let selectedOperator = "<%= operator %>";
        let selectedDifficulty = "<%= difficulty %>";
        let startTime;

        function startTimer() {
            startTime = Date.now();
            const timerElement = document.getElementById("timer");
            setInterval(() => {
                const elapsedTime = Date.now() - startTime;
                const seconds = Math.floor((elapsedTime / 1000) % 60);
                const minutes = Math.floor((elapsedTime / 1000 / 60) % 60);
                const hours = Math.floor((elapsedTime / 1000 / 60 / 60));
                timerElement.textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function generateRandomNumber(difficulty) {
            if (difficulty === 'easy') return Math.floor(Math.random() * 10);
            if (difficulty === 'medium') return Math.floor(Math.random() * 90) + 10;
            return Math.floor(Math.random() * 90) + 10;
        }

        function generateQuestions(operator, difficulty) {
            const questionsContainer = document.getElementById('questions');
            for (let i = 0; i < 10; i++) {
                const num1 = generateRandomNumber(difficulty);
                const num2 = generateRandomNumber(difficulty);
                const question = document.createElement('div');
                question.className = 'flex items-center justify-between p-2 bg-blue-200 rounded-lg';
                question.innerHTML = `
                    <span>${num1} ${selectedOperator} ${num2} = </span>
                    <input type="text" class="answer-input w-24 mx-11 p-2 rounded-lg shadow" data-num1="${num1}" data-operator="${selectedOperator}" data-num2="${num2}">
                    <span class="correct-answer"></span>
                `;
                questionsContainer.appendChild(question);
            }
        }

        function submitAnswers() {
            const inputs = document.querySelectorAll('.answer-input');
            inputs.forEach(input => {
                const num1 = parseInt(input.getAttribute('data-num1'));
                const operator = input.getAttribute('data-operator');
                const num2 = parseInt(input.getAttribute('data-num2'));
                let correctAnswer;
                switch (operator) {
                    case '+': correctAnswer = num1 + num2; break;
                    case '-': correctAnswer = num1 - num2; break;
                    case '*': correctAnswer = num1 * num2; break;
                    case '/': correctAnswer = (num1 / num2).toFixed(2); break;
                }
                const userAnswer = parseFloat(input.value);
                const answerDisplay = input.nextElementSibling;
                answerDisplay.textContent = `Correct: ${correctAnswer}`;
                answerDisplay.style.display = 'block';
                if (userAnswer !== correctAnswer) {
                    input.classList.add('wrong-answer');
                } else {
                    input.classList.remove('wrong-answer');
                }
            });

            // Stop the timer
            clearInterval(startTimer);
        }

        window.onload = function() {
            generateQuestions(selectedOperator, selectedDifficulty);
            startTimer();
        }
    </script>
    
</body>
</html>